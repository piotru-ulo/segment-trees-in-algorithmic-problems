\begin{algorithm}[H]
    \caption{Range Query on Segment Tree for Max with Modifiers}
    \begin{algorithmic}
        \Procedure{RangeQuery}{seg, index, l, r, a, b}
            \If{$b \leq l$ \textbf{or} $r \leq a$}
                \State \Return $-\infty$
            \EndIf
            \If{$a \leq l$ \textbf{and} $r \leq b$}
                \State \Return $seg[index].val$
            \EndIf
            \State $mid \gets \left\lfloor \frac{l + r}{2} \right\rfloor$
            \State $left \gets$ \Call{RangeQuery}{seg, $2 \cdot index$, $l$, $mid$, $a$, $b$}
            \State $right \gets$ \Call{RangeQuery}{seg, $2 \cdot index + 1$, $mid$, $r$, $a$, $b$}
            \State \Return $\max(left, right) + seg[index].mod$
        \EndProcedure
    \end{algorithmic}
\end{algorithm}

\begin{algorithm}
    \caption{Range Maximum Query on Segment Tree (Recursive, Close-Open Range)}
    \begin{algorithmic}[1]
        \Procedure{RangeQuery}{seg, index, l, r, a, b}
            \Comment{index: current node index in seg}
            \Comment{[l, r): segment represented by current node}
            \Comment{[a, b): query range}
            \If{$b \le l$ \textbf{or} $r \le a$}
                \State \Return $-\infty$ \Comment{No overlap}
            \ElsIf{$a \le l$ \textbf{and} $r \le b$}
                \State \Return $seg[index]$ \Comment{Total overlap}
            \Else
                \State $mid \gets \left\lfloor \frac{l + r}{2} \right\rfloor$
                \State $left \gets$ \Call{RangeQuery}{seg, $2 \cdot index$, $l$, $mid$, $a$, $b$}
                \State $right \gets$ \Call{RangeQuery}{seg, $2 \cdot index + 1$, $mid$, $r$, $a$, $b$}
                \State \Return $\max(left, right)$
            \EndIf
        \EndProcedure
    \end{algorithmic}
\end{algorithm}